FROM oven/bun:latest

ENV NODE_ENV=production

WORKDIR /app

# Copy only the necessary files for migrations
COPY package.json bun.lockb ./
COPY drizzle.config.ts ./
COPY src/db ./src/db
COPY drizzle ./drizzle

RUN bun install

CMD ["npx", "drizzle-kit", "migrate"] 
